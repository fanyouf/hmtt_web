(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1742256f"],{"571c":function(e,t,r){"use strict";r("aa84")},aa84:function(e,t,r){},c24f:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"e",(function(){return u})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return f}));var n=r("b775"),o=function(e,t){return Object(n["a"])({method:"POST",url:"/app/v1_0/authorizations",data:{mobile:e,code:t}})},a=function(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/profile"})},u=function(e){return Object(n["a"])({method:"DELETE",url:"/app/v1_0/user/followings/"+e})},i=function(e){return Object(n["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:e}})},c=function(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user"})},s=function(e){return Object(n["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:e})},f=function(e){return Object(n["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:e})}},dc3f:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("van-nav-bar",{attrs:{title:"登陆"}}),r("van-cell-group",[r("van-field",{attrs:{type:"tel",label:"手机号","error-message":e.errorInfo.mobile},model:{value:e.userInfo.mobile,callback:function(t){e.$set(e.userInfo,"mobile","string"===typeof t?t.trim():t)},expression:"userInfo.mobile"}}),r("van-field",{attrs:{type:"password",label:"密码","error-message":e.errorInfo.code},model:{value:e.userInfo.code,callback:function(t){e.$set(e.userInfo,"code","string"===typeof t?t.trim():t)},expression:"userInfo.code"}})],1),r("div",{staticClass:"btn-wrap"},[r("van-button",{attrs:{type:"info"},on:{click:e.hLogin}},[e._v("登陆")])],1)],1)},o=[],a=(r("96cf"),r("1da1")),u=r("c24f"),i={data:function(){return{errorInfo:{mobile:"",code:""},userInfo:{mobile:"13912345678",code:"246810"}}},methods:{validate:function(){var e=this.userInfo,t=e.mobile,r=e.code;return this.errorInfo.mobile=/^\d{11}$/.test(t)?"":"请输入正确的手机号",this.errorInfo.code=/^\d{6}$/.test(r)?"":"请输入正确的密码",""===this.errorInfo.mobile&&""===this.errorInfo.code},doLogin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,o,a,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.userInfo,n=r.mobile,o=r.code,e.$toast.loading({duration:0,overlay:!0,message:"登陆中...."}),t.prev=2,t.next=5,Object(u["d"])(n,o);case 5:return a=t.sent,e.$store.commit("mSetTokenInfo",a.data.data),t.next=10,Object(u["c"])();case 10:i=t.sent,e.$store.commit("mUserInfo",i.data.data),e.$toast.success("登陆成功"),c=e.$route.query.backto||"/",e.$router.push(c),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](2),e.$toast.fail("登陆失败");case 22:case"end":return t.stop()}}),t,null,[[2,18]])})))()},hLogin:function(){this.validate()&&this.doLogin()}}},c=i,s=(r("571c"),r("2877")),f=Object(s["a"])(c,n,o,!1,null,"15bae980",null);t["default"]=f.exports}}]);