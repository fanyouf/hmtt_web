(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-127aacfe"],{"4fb6":function(e,t,n){"use strict";n("d1ce")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),o=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(c,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,c;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(e,c),e}},"77b8":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index"},[n("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t},on:{"close-btn-click":e.hCloseBtnClick}})],1)})),1),e.$store.getters.isLogin?n("div",{staticClass:"bar-btn",on:{click:function(t){e.isShowChannelEdit=!0}}},[n("van-icon",{attrs:{name:"wap-nav"}})],1):e._e(),n("van-action-sheet",{model:{value:e.isShowChannelEdit,callback:function(t){e.isShowChannelEdit=t},expression:"isShowChannelEdit"}},[n("channel-edit",{attrs:{a:30,curIndex:e.active,channels:e.channels},on:{"fixed-cur-index":e.hFixedCurIndex,"update-cur-index":e.hUpdateCurIndex}})],1),n("van-popup",{style:{width:"80%"},model:{value:e.isShowMoreAction,callback:function(t){e.isShowMoreAction=t},expression:"isShowMoreAction"}},[n("more-action",{ref:"refMoreAction",on:{report:e.hReport,uninterested:e.hUninterested}})],1)],1)},a=[],i=(n("96cf"),n("1da1")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"refScroll",staticClass:"scroll-wrapper",on:{scroll:e.hScroll}},[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"讨厌，人家被人看完了~~"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t){return n("van-cell",{key:t.art_id.toString(),attrs:{title:t.title},on:{click:function(n){e.$router.push({name:"article",params:{id:t.art_id.toString(),a:100,b:200}})}}},[n("div",{attrs:{slot:"label"},slot:"label"},[t.cover.images.length?n("van-grid",{attrs:{"column-num":t.cover.images.length,border:!1}},e._l(t.cover.images,(function(e,t){return n("van-grid-item",{key:t},[n("van-image",{attrs:{"lazy-load":"",src:e}})],1)})),1):e._e(),n("div",{staticClass:"meta"},[n("span",[e._v(e._s(t.aut_name))]),n("span",[e._v(e._s(t.comm_count)+"评论")]),n("span",[e._v(e._s(e._f("relativeTime")(t.pubdate)))]),e.$store.state.tokenInfo.token?n("span",{staticClass:"close",on:{click:function(n){return n.stopPropagation(),e.hCloseBtn(t)}}},[n("van-icon",{attrs:{name:"cross"}})],1):e._e()])],1)])})),1)],1)],1)},s=[],o=(n("c740"),n("a434"),n("d3b7"),n("25f0"),n("2909")),l=n("2b0e"),u=new l["a"],d=n("2423"),f={props:{channel:{type:Object}},data:function(){return{list:[],timestamp:Date.now(),refreshing:!1,loading:!1,finished:!1}},created:function(){var e=this;u.$on("delete-article",(function(t){var n=e.list.findIndex((function(e){return e.art_id.toString()===t}));-1!==n&&e.list.splice(n,1)}))},activated:function(){this.scrollTop&&(this.$refs.refScroll.scrollTop=this.scrollTop)},deactivated:function(){},methods:{hCloseBtn:function(e){this.$emit("close-btn-click",e.art_id.toString())},onLoad:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["b"])(e.channel.id,e.timestamp);case 2:r=t.sent,a=r.data.data.results,e.timestamp=r.data.data.pre_timestamp,(n=e.list).push.apply(n,Object(o["a"])(a)),e.loading=!1,0===a.length&&(e.finished=!0);case 8:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,Object(d["b"])(e.channel.id,Date.now());case 3:r=t.sent,a=r.data.data.results,(n=e.list).unshift.apply(n,Object(o["a"])(a)),e.refreshing=!1,e.$toast("更新".concat(a.length,"条数据"));case 8:case"end":return t.stop()}}),t)})))()},updateScrollTop:function(){this.scrollTop=this.$refs.refScroll.scrollTop},hScroll:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.updateScrollTop()}),50)}}},h=f,p=(n("b7a6"),n("2877")),v=Object(p["a"])(h,c,s,!1,null,"8abb87b6",null),m=v.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"more-action"},[e.isReport?n("van-cell-group",[n("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(t){e.isReport=!1}}},[e._v("返回")]),e._l(e.reportTypeList,(function(t){return n("van-cell",{key:t.value,on:{click:function(n){return e.$emit("report",t.value)}}},[e._v(e._s(t.label))])}))],2):n("van-cell-group",[n("van-cell",{on:{click:function(t){return e.$emit("uninterested")}}},[e._v("不感兴趣")]),n("van-cell",{attrs:{"is-link":""},on:{click:function(t){e.isReport=!0}}},[e._v("反馈垃圾内容")]),n("van-cell",[e._v("拉黑作者")])],1)],1)},g=[],x=[{value:0,label:"其它问题"},{value:1,label:"标题夸张"},{value:2,label:"低俗色情"},{value:3,label:"错别字多"},{value:4,label:"旧闻重复"},{value:6,label:"内容不实"},{value:8,label:"侵权"},{value:5,label:"广告软文"},{value:7,label:"涉嫌违法犯罪"}],w=x,C={name:"MoreAction",data:function(){return{reportTypeList:w,isReport:!1}}},_=C,k=(n("8631"),Object(p["a"])(_,b,g,!1,null,"27d7f499",null)),I=k.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-edit"},[n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"我的频道",border:!1}},[n("van-button",{staticClass:"editBtn",attrs:{size:"mini"},on:{click:function(t){e.editing=!e.editing}}},[e._v(e._s(e.editing?"取消":"编辑"))])],1),n("van-grid",e._l(e.channels,(function(t,r){return n("van-grid-item",{key:t.id,class:{cur:r===e.curIndex},on:{click:function(t){return e.hClickMyChannel(r)}}},[n("span",[e._v(e._s(t.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.editing&&0!=r,expression:"editing && idx !=0"}],staticClass:"btn",attrs:{name:"cross"}})],1)})),1)],1),n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"可选频道",border:!1}}),n("van-grid",e._l(e.recommendChannels,(function(t){return n("van-grid-item",{key:t.id,on:{click:function(n){return e.hClickRecommendChannels(t)}}},[n("span",[e._v(e._s(t.name))])])})),1)],1)])},S=[],y=(n("99af"),n("4de4"),n("d81d"),n("a9e3"),n("b775")),A=function(){var e=Object(y["a"])({method:"GET",url:"/app/v1_0/user/channels"});return e},R=function(){return Object(y["a"])({method:"GET",url:"/app/v1_0/channels"})},$=function(e){return Object(y["a"])({method:"PUT",url:"/app/v1_0/user/channels",data:{channels:e}})},O=function(e){return Object(y["a"])({method:"DELETE",url:"/app/v1_0/user/channels",data:{channels:[e]}})},T={name:"ChannelEdit",props:{a:{type:Number,required:!1,default:100,validator:function(e){return!(e>50)}},curIndex:{type:Number},channels:{type:Array}},data:function(){return{editing:!1,allChannels:[]}},computed:{recommendChannels:function(){var e=this,t=this.allChannels.filter((function(t){var n=e.channels.findIndex((function(e){return e.id===t.id}));return-1===n}));return t}},created:function(){this.loadAllChannels()},methods:{loadAllChannels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:n=t.sent,e.allChannels=n.data.data.channels;case 4:case"end":return t.stop()}}),t)})))()},hClickMyChannel:function(e){this.editing?this.doDeleteChannel(e):this.$emit("update-cur-index",e)},doDeleteChannel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,r=t.channels[e].id,n.next=4,O(r);case 4:n.sent,t.channels.splice(e,1),t.$toast.success("删除频道成功"),e<t.curIndex&&t.$emit("fixed-cur-index",t.curIndex-1),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](0),t.$toast.fail("删除频道失败");case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))()},hClickRecommendChannels:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,r=[].concat(Object(o["a"])(t.channels),[e]).map((function(e,t){return{id:e.id,seq:t}})).filter((function(e){return 0!==e.id})),n.next=4,$(r);case 4:t.channels.push(e),t.$toast.success("订阅频道成功"),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),t.$toast.fail("订阅频道失败");case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}},j=T,M=(n("b48b"),Object(p["a"])(j,E,S,!1,null,"6c1a4278",null)),N=M.exports,L={name:"home",data:function(){return{isShowChannelEdit:!1,articleId:"",isShowMoreAction:!1,active:2,channels:[]}},components:{ArticleList:m,MoreAction:I,ChannelEdit:N},created:function(){this.loadChannels()},methods:{loadChannels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:n=t.sent,e.channels=n.data.data.channels;case 5:case"end":return t.stop()}}),t)})))()},hCloseBtnClick:function(e){this.isShowMoreAction=!0,this.$refs.refMoreAction&&(this.$refs.refMoreAction.isReport=!1),this.articleId=e},hUninterested:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d["a"])(e.articleId);case 3:t.sent,e.isShowMoreAction=!1,u.$emit("delete-article",e.articleId),e.$toast.success("操作成功"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$toast.fail("操作失败");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},hReport:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(d["d"])(t.articleId,e);case 3:n.sent,t.isShowMoreAction=!1,u.$emit("delete-article",t.articleId),t.$toast.success("举报成功"),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),t.$toast.fail("举报失败");case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},hUpdateCurIndex:function(e){this.isShowChannelEdit=!1,this.active=e},hFixedCurIndex:function(e){this.active=e}}},F=L,U=(n("4fb6"),Object(p["a"])(F,r,a,!1,null,"69b307cc",null));t["default"]=U.exports},8631:function(e,t,n){"use strict";n("8dd1")},"88e8":function(e,t,n){},"8dd1":function(e,t,n){},"99af":function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),i=n("e8b5"),c=n("861d"),s=n("7b0b"),o=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),f=n("b622"),h=n("2d00"),p=f("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",b=h>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=d("concat"),x=function(e){if(!c(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)},w=!b||!g;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,r,a,i,c=s(this),d=u(c,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?c:arguments[t],x(i)){if(a=o(i.length),f+a>v)throw TypeError(m);for(n=0;n<a;n++,f++)n in i&&l(d,f,i[n])}else{if(f>=v)throw TypeError(m);l(d,f++,i)}return d.length=f,d}})},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),c=n("50c4"),s=n("7b0b"),o=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),f=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!h},{splice:function(e,t){var n,r,u,d,f,h,g=s(this),x=c(g.length),w=a(e,x),C=arguments.length;if(0===C?n=r=0:1===C?(n=0,r=x-w):(n=C-2,r=v(p(i(t),0),x-w)),x+n-r>m)throw TypeError(b);for(u=o(g,r),d=0;d<r;d++)f=w+d,f in g&&l(u,d,g[f]);if(u.length=r,n<r){for(d=w;d<x-r;d++)f=d+r,h=d+n,f in g?g[h]=g[f]:delete g[h];for(d=x;d>x-r+n;d--)delete g[d-1]}else if(n>r)for(d=x-r;d>w;d--)f=d+r-1,h=d+n-1,f in g?g[h]=g[f]:delete g[h];for(d=0;d<n;d++)g[d+w]=arguments[d+2];return g.length=x-r+n,u}})},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),o=n("c6b6"),l=n("7156"),u=n("c04e"),d=n("d039"),f=n("7c73"),h=n("241c").f,p=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,b="Number",g=a[b],x=g.prototype,w=o(f(x))==b,C=function(e){var t,n,r,a,i,c,s,o,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=m(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=l.slice(2),c=i.length,s=0;s<c;s++)if(o=i.charCodeAt(s),o<48||o>a)return NaN;return parseInt(i,r)}return+l};if(i(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var _,k=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof k&&(w?d((function(){x.valueOf.call(n)})):o(n)!=b)?l(new g(C(t)),n,k):C(t)},I=r?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;I.length>E;E++)s(g,_=I[E])&&!s(k,_)&&v(k,_,p(g,_));k.prototype=x,x.constructor=k,c(a,b,k)}},ac18:function(e,t,n){},b48b:function(e,t,n){"use strict";n("ac18")},b7a6:function(e,t,n){"use strict";n("88e8")},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),c=n("ae40"),s="findIndex",o=!0,l=c(s);s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!l},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},d1ce:function(e,t,n){},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,i=n("1dde"),c=n("ae40"),s=i("map"),o=c("map");r({target:"Array",proto:!0,forced:!s||!o},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);