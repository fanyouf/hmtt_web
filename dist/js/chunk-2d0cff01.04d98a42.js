(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cff01"],{"669d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"编辑资料"},on:{"click-left":function(t){return e.$router.back()}}}),n("van-cell-group",[n("input",{ref:"refPhoto",attrs:{type:"file",hidden:""},on:{change:e.hPhotoChange}}),n("van-cell",{attrs:{"is-link":"",title:"头像",center:""},on:{click:e.hShowSelectImage}},[n("van-image",{attrs:{slot:"default",width:"1.5rem",height:"1.5rem",fit:"cover",round:"",src:e.user.photo},slot:"default"})],1),n("van-cell",{attrs:{"is-link":"",title:"姓名",value:e.user.name},on:{click:function(t){e.showName=!0}}}),n("van-cell",{attrs:{"is-link":"",title:"性别",value:1===e.user.gender?"女":"男"},on:{click:function(t){e.showGender=!0}}}),n("van-cell",{attrs:{"is-link":"",title:"生日",value:e.user.birthday},on:{click:function(t){e.showBirthday=!0}}})],1),n("van-dialog",{attrs:{title:"修改名字","show-cancel-button":""},on:{confirm:e.hSaveName},model:{value:e.showName,callback:function(t){e.showName=t},expression:"showName"}},[n("van-field",{model:{value:e.newName,callback:function(t){e.newName="string"===typeof t?t.trim():t},expression:"newName"}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showGender,callback:function(t){e.showGender=t},expression:"showGender"}},[n("van-nav-bar",{attrs:{title:"修改性别","left-text":"取消"},on:{"click-left":function(t){e.showGender=!1}}}),n("van-cell",{attrs:{title:"男","is-link":""},on:{click:function(t){return e.hSaveGender(0)}}}),n("van-cell",{attrs:{title:"女","is-link":""},on:{click:function(t){return e.hSaveGender(1)}}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showBirthday,callback:function(t){e.showBirthday=t},expression:"showBirthday"}},[n("van-nav-bar",{attrs:{title:"修改生日"}}),n("van-datetime-picker",{attrs:{type:"date",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{cancel:function(t){e.showBirthday=!1},confirm:e.hSaveBirthday},model:{value:e.newDate,callback:function(t){e.newDate=t},expression:"newDate"}})],1)],1)},r=[],o=(n("b0c0"),n("96cf"),n("1da1")),s=n("c24f"),i=n("5a0c"),c=n.n(i),u={name:"userProfile",data:function(){return{showName:!1,showGender:!1,showBirthday:!1,user:{name:"张三"},newName:"",newDate:new Date,minDate:new Date(2e3,0,10),maxDate:new Date}},created:function(){this.loadProfile()},methods:{hShowSelectImage:function(){this.$refs.refPhoto.click()},hPhotoChange:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$refs.refPhoto.files[0],n){t.next=3;break}return t.abrupt("return");case 3:return e.$toast.loading({duration:0,mask:!0,message:"操作中...."}),t.prev=4,a=new FormData,a.append("photo",n),t.next=9,Object(s["f"])(a);case 9:r=t.sent,e.user.photo=r.data.data.photo,e.$store.commit("mSetUserPhoto",e.user.photo),e.$toast.success("修改头像成功"),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](4),e.$toast.fail("修改头像失败");case 18:case"end":return t.stop()}}),t,null,[[4,15]])})))()},hSaveName:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.newName){t.next=2;break}return t.abrupt("return");case 2:return e.$toast.loading({duration:0,mask:!0,message:"操作中...."}),t.prev=3,t.next=6,Object(s["g"])({name:e.newName});case 6:t.sent,e.user.name=e.newName,e.newName="",e.$toast.success("修改名字成功"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),e.$toast.fail("修改名字失败");case 16:case"end":return t.stop()}}),t,null,[[3,13]])})))()},hSaveGender:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$toast.loading({duration:0,mask:!0,message:"操作中...."}),n.prev=1,n.next=4,Object(s["g"])({gender:e});case 4:n.sent,t.user.gender=e,t.$toast.success("修改性别成功"),t.showGender=!1,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](1),t.$toast.fail("修改性别失败");case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},hSaveBirthday:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=c()(e.newDate).format("YYYY-MM-DD"),e.$toast.loading({duration:0,mask:!0,message:"操作中...."}),t.prev=3,t.next=6,Object(s["g"])({birthday:n});case 6:t.sent,e.user.birthday=n,e.showBirthday=!1,e.$toast.success("修改生日成功"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),e.$toast.fail("修改生日失败");case 16:case"end":return t.stop()}}),t,null,[[3,13]])})))()},loadProfile:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["c"])();case 2:n=t.sent,e.user=n.data.data,e.newName=e.user.name;case 6:case"end":return t.stop()}}),t)})))()}}},l=u,h=n("2877"),m=Object(h["a"])(l,a,r,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0cff01.04d98a42.js.map