(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e054be2e"],{"159b":function(e,t,n){var r=n("da84"),a=n("fdbc"),i=n("17c2"),c=n("9112");for(var o in a){var s=r[o],l=s&&s.prototype;if(l&&l.forEach!==i)try{c(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,a=n("a640"),i=n("ae40"),c=a("forEach"),o=i("forEach");e.exports=c&&o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},2117:function(e,t,n){},"3c17":function(e,t,n){"use strict";var r=n("7d95"),a=n.n(r);a.a},"3ffb":function(e,t,n){},4160:function(e,t,n){"use strict";var r=n("23e7"),a=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},5081:function(e,t,n){"use strict";var r=n("2117"),a=n.n(r);a.a},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(c,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,c;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(e,c),e}},"7d95":function(e,t,n){},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),c=n("50c4"),o=n("7b0b"),s=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),h=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h||!f},{splice:function(e,t){var n,r,u,d,h,f,w=o(this),g=c(w.length),x=a(e,g),C=arguments.length;if(0===C?n=r=0:1===C?(n=0,r=g-x):(n=C-2,r=v(p(i(t),0),g-x)),g+n-r>m)throw TypeError(b);for(u=s(w,r),d=0;d<r;d++)h=x+d,h in w&&l(u,d,w[h]);if(u.length=r,n<r){for(d=x;d<g-r;d++)h=d+r,f=d+n,h in w?w[f]=w[h]:delete w[f];for(d=g;d>g-r+n;d--)delete w[d-1]}else if(n>r)for(d=g-r;d>x;d--)h=d+r-1,f=d+n-1,h in w?w[f]=w[h]:delete w[f];for(d=0;d<n;d++)w[d+x]=arguments[d+2];return w.length=g-r+n,u}})},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),o=n("5135"),s=n("c6b6"),l=n("7156"),u=n("c04e"),d=n("d039"),h=n("7c73"),f=n("241c").f,p=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,b="Number",w=a[b],g=w.prototype,x=s(h(g))==b,C=function(e){var t,n,r,a,i,c,o,s,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=m(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=l.slice(2),c=i.length,o=0;o<c;o++)if(s=i.charCodeAt(o),s<48||s>a)return NaN;return parseInt(i,r)}return+l};if(i(b,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var I,E=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof E&&(x?d((function(){g.valueOf.call(n)})):s(n)!=b)?l(new w(C(t)),n,E):C(t)},_=r?f(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;_.length>k;k++)o(w,I=_[k])&&!o(E,I)&&v(E,I,p(w,I));E.prototype=g,g.constructor=E,c(a,b,E)}},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),c=n("ae40"),o="findIndex",s=!0,l=c(o);o in[]&&Array(1)[o]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!l},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,i=n("1dde"),c=n("ae40"),o=i("map"),s=c("map");r({target:"Array",proto:!0,forced:!o||!s},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e0e4:function(e,t,n){"use strict";var r=n("3ffb"),a=n.n(r);a.a},f5b8:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index"},[n("van-tabs",{model:{value:e.curIndex,callback:function(t){e.curIndex=t},expression:"curIndex"}},e._l(e.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t},on:{showMoreAction:e.hShowMoreAction}})],1)})),1),e.$store.state.tokenInfo.token?n("div",{staticClass:"bar-btn",on:{click:function(t){e.isShowChannelEdit=!0}}},[n("van-icon",{attrs:{name:"wap-nav"}})],1):e._e(),n("van-popup",{style:{width:"80%"},model:{value:e.isSHowMoreAction,callback:function(t){e.isSHowMoreAction=t},expression:"isSHowMoreAction"}},[n("more-action",{ref:"refMoreAction",on:{report:e.hReport,"dis-like":e.hDislike}})],1),n("van-action-sheet",{attrs:{title:"频道管理"},model:{value:e.isShowChannelEdit,callback:function(t){e.isShowChannelEdit=t},expression:"isShowChannelEdit"}},[n("channel-edit",{attrs:{abc:101,channels:e.channels,curIndex:e.curIndex},on:{updateCurrentIndex:e.hUpdateCurrentIndex,updateCurChannel:e.hUpdateCurChannel}})],1)],1)},a=[],i=(n("96cf"),n("1da1")),c=n("b775"),o=function(){return Object(c["a"])({method:"GET",url:"/app/v1_0/user/channels"})},s=function(){return Object(c["a"])({method:"GET",url:"/app/v1_0/channels"})},l=function(e){return Object(c["a"])({method:"PUT",url:"/app/v1_0/user/channels",data:{channels:e}})},u=function(e){return Object(c["a"])({method:"DELETE",url:"/app/v1_0/user/channels",data:{channels:[e]}})},d=n("2423"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"refScroll",staticClass:"scroll-wrapper",on:{scroll:e.hScroll}},[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoadingNew,callback:function(t){e.isLoadingNew=t},expression:"isLoadingNew"}},[n("van-list",{attrs:{finished:e.finished,"loading-text":"一大波数据正在赶过来","finished-text":"讨厌，人家被你看完了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t){return n("van-cell",{key:t.art_id.toString(),attrs:{title:t.title},on:{click:function(n){e.$router.push({name:"Article",params:{id:t.art_id.toString(),a:1,b:2}})}}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("van-grid",{attrs:{"column-num":t.cover.images.length,border:!1}},e._l(t.cover.images,(function(e,t){return n("van-grid-item",{key:t},[n("van-image",{attrs:{"lazy-load":"",src:e,alt:""}})],1)})),1),n("div",{staticClass:"meta"},[n("span",[e._v(e._s(t.aut_name))]),n("span",[e._v(e._s(t.comm_count)+"评论")]),n("span",[e._v(e._s(e._f("relativeTime")(t.pubdate)))]),e.$store.getters.isLogin?n("span",{staticClass:"close",on:{click:function(n){return n.stopPropagation(),e.hClose(t)}}},[n("van-icon",{attrs:{name:"cross"}})],1):e._e()])],1)])})),1)],1)],1)},f=[],p=(n("c740"),n("a434"),n("b0c0"),n("d3b7"),n("25f0"),n("2909")),v={name:"ArticleList",props:{channel:{type:Object,required:!0}},data:function(){return{scrollTop:0,isLoadingNew:!1,timestamp:null,list:[],loading:!1,finished:!1}},activated:function(){this.scrollTop&&(this.$refs.refScroll.scrollTop=this.scrollTop)},deactivated:function(){},created:function(){var e=this;this.$eventBus.$on("delArticle",(function(t){var n=t.articleId,r=t.channelId;e.delArticle(n,r)}))},methods:{delArticle:function(e,t){if(this.channel.id===t){var n=this.list.findIndex((function(t){return t.art_id.toString()===e}));-1!==n&&this.list.splice(n,1)}},hClose:function(e){var t=e.art_id.toString();this.$emit("showMoreAction",t)},onRefresh:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["c"])(e.channel.id,Date.now());case 2:r=t.sent,a=r.data.data.results,(n=e.list).unshift.apply(n,Object(p["a"])(a)),e.isLoadingNew=!1,e.$toast("更新".concat(a.length,"条数据"));case 7:case"end":return t.stop()}}),t)})))()},onLoad:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.timestamp||(e.timestamp=Date.now()),t.next=3,Object(d["c"])(e.channel.id,e.timestamp);case 3:r=t.sent,e.timestamp=r.data.data.pre_timestamp,a=r.data.data.results,(n=e.list).push.apply(n,Object(p["a"])(a)),e.loading=!1,0===a.length&&(e.finished=!0);case 10:case"end":return t.stop()}}),t)})))()},hScroll:function(){this.scrollTop=this.$refs.refScroll.scrollTop}}},m=v,b=(n("e0e4"),n("2877")),w=Object(b["a"])(m,h,f,!1,null,"a2ee6d68",null),g=w.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-edit"},[n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"我的频道",border:!1}},[n("van-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){e.isEdit=!e.isEdit}}},[e._v(e._s(e.isEdit?"取消":"编辑"))])],1),n("van-grid",e._l(e.channels,(function(t,r){return n("van-grid-item",{key:t.id,class:{cur:r===e.curIndex},on:{click:function(t){return e.hClickMyChannel(r)}}},[n("span",[e._v(e._s(t.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.isEdit&&0!=r,expression:"isEdit && idx!=0"}],staticClass:"btn",attrs:{name:"cross"}})],1)})),1)],1),n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"可选频道",border:!1}}),n("van-grid",e._l(e.recommandChannels,(function(t){return n("van-grid-item",{key:t.id,on:{click:function(n){return e.hClickRecommandChannel(t)}}},[n("span",[e._v(e._s(t.name))])])})),1)],1)])},C=[],I=(n("4de4"),n("4160"),n("d81d"),n("a9e3"),n("159b"),{name:"channelEdit",props:{abc:{type:Number,required:!1,default:1,validator:function(e){return!(e>100)}},channels:{type:Array,required:!0},curIndex:{type:Number,require:!0}},data:function(){return{isEdit:!1,allChannels:[]}},computed:{recommandChannels:function(){var e=this;return this.allChannels.filter((function(t){return-1===e.channels.findIndex((function(e){return e.id===t.id}))}))}},created:function(){this.loadAllChannels()},methods:{hClickRecommandChannel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.id,a=t.channels.map((function(e){return{id:e.id}})),a.push({id:r}),a.forEach((function(e,t){e.seq=t})),a.splice(0,1),l(a),t.channels.push(e),t.$toast.success("添加频道成功");case 9:case"end":return n.stop()}}),n)})))()},loadAllChannels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:n=t.sent,e.allChannels=n.data.data.channels;case 5:case"end":return t.stop()}}),t)})))()},hClickMyChannel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.isEdit){n.next=12;break}if(0!==e){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,u(t.channels[e].id);case 5:n.sent,t.channels.splice(e,1),e<t.curIndex&&t.$emit("updateCurrentIndex",t.curIndex-1),t.$toast.success("删除频道成功"),n.next=13;break;case 12:t.$emit("updateCurChannel",e);case 13:case"end":return n.stop()}}),n)})))()}}}),E=I,_=(n("3c17"),Object(b["a"])(E,x,C,!1,null,"66e5fcc5",null)),k=_.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"more-action"},[n("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:!e.isReport,expression:"!isReport"}]},[n("van-cell",{attrs:{title:"不感兴趣"},on:{click:function(t){return e.$emit("dis-like")}}}),n("van-cell",{attrs:{title:"反馈垃圾内容","is-link":""},on:{click:function(t){e.isReport=!0}}}),n("van-cell",{attrs:{title:"拉黑作者"}})],1),n("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:e.isReport,expression:"isReport"}]},[n("van-cell",{attrs:{icon:"arrow-left",title:"返回"},on:{click:function(t){e.isReport=!1}}}),e._l(e.reportsArr,(function(t){return n("van-cell",{key:t.value,on:{click:function(n){return e.$emit("report",t.value)}}},[e._v(" "+e._s(t.label)+" ")])}))],2)],1)},R=[],S=[{value:1,label:"标题夸张"},{value:0,label:"其它问题"},{value:2,label:"低俗色情"},{value:3,label:"错别字多"},{value:6,label:"内容不实"},{value:4,label:"旧闻重复"},{value:8,label:"侵权"},{value:5,label:"广告软文"},{value:7,label:"涉嫌违法犯罪"}],y={name:"moreAction",data:function(){return{reportsArr:S,isReport:!1}},methods:{f1:function(){}}},N=y,O=(n("5081"),Object(b["a"])(N,A,R,!1,null,"d3e90cd4",null)),M=O.exports,$={name:"Index",components:{ArticleList:g,MoreAction:M,ChannelEdit:k},data:function(){return{articleId:null,isShowChannelEdit:!1,isSHowMoreAction:!1,channels:[],curIndex:0}},created:function(){this.loadChannel()},computed:{cChannelId:function(){return this.channels[this.curIndex].id}},methods:{hUpdateCurChannel:function(e){this.curIndex=e,this.isShowChannelEdit=!1},hUpdateCurrentIndex:function(e){this.curIndex=e},delArticle:function(){this.$eventBus.$emit("delArticle",{articleId:this.articleId,channelId:this.cChannelId})},hReport:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=3,Object(d["d"])(t.articleId,e);case 3:n.sent,t.isSHowMoreAction=!1,t.delArticle();case 7:case"end":return n.stop()}}),n)})))()},hDislike:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,Object(d["a"])(e.articleId);case 3:t.sent,e.isSHowMoreAction=!1,e.delArticle();case 7:case"end":return t.stop()}}),t)})))()},hShowMoreAction:function(e){this.articleId=e,this.isSHowMoreAction=!0,this.$refs.refMoreAction&&(this.$refs.refMoreAction.isReport=!1)},loadChannel:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:n=t.sent,e.channels=n.data.data.channels;case 5:case"end":return t.stop()}}),t)})))()}}},j=$,T=Object(b["a"])(j,r,a,!1,null,null,null);t["default"]=T.exports}}]);
//# sourceMappingURL=chunk-e054be2e.44f6348d.js.map