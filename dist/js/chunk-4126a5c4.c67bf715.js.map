{"version":3,"sources":["webpack:///./src/pages/article/index.vue?f73f","webpack:///./src/pages/article/comment.vue?1913","webpack:///./src/pages/article/commentReply.vue?15c7","webpack:///./src/api/comment.js","webpack:///src/pages/article/commentReply.vue","webpack:///./src/pages/article/commentReply.vue?7b05","webpack:///./src/pages/article/commentReply.vue","webpack:///src/pages/article/comment.vue","webpack:///./src/pages/article/comment.vue?3f48","webpack:///./src/pages/article/comment.vue","webpack:///src/pages/article/index.vue","webpack:///./src/pages/article/index.vue?c9da","webpack:///./src/pages/article/index.vue","webpack:///./src/pages/article/commentReply.vue?d97e","webpack:///./src/pages/article/index.vue?dded","webpack:///./src/api/user.js","webpack:///./src/pages/article/comment.vue?b70c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","back","_e","_v","push","_s","article","title","aut_photo","aut_name","_f","pubdate","hSwitchFollow","is_followed","domProps","content","attitude","ref","articleId","staticRenderFns","finished","onLoad","model","value","callback","$$v","loading","expression","_l","item","key","com_id","toString","staticStyle","slot","hReply","reply_count","trim","hAddComment","style","height","isReplyShow","currentComment","$emit","index","hAddReply","addComment","ajax","method","url","data","target","addCommentReply","commentId","art_id","getComments","offset","params","type","source","getCommentReplys","replyId","name","props","Object","required","String","list","methods","component","components","CommentReply","ArticleComment","is404","created","$route","id","loadArticle","beforeRouteLeave","$refs","refArticleComment","ans","next","login","mobile","code","getInfo","getProfile","followUser","userId","unFollowUser","updateUserInfo","obj","updatePhoto"],"mappings":"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","file":"js/chunk-4126a5c4.c67bf715.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-container\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"left-arrow\":\"\",\"title\":\"文章详情\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(_vm.loading)?_c('van-loading',{staticClass:\"article-loading\"}):_vm._e(),(_vm.is404)?_c('div',{staticClass:\"error\"},[_c('p',[_vm._v(\"文章被外星人吃掉了\")]),_c('van-button',{on:{\"click\":function($event){return _vm.$router.back()}}},[_vm._v(\"后退\")]),_c('van-button',{on:{\"click\":function($event){return _vm.$router.push('/')}}},[_vm._v(\"回主页\")])],1):_c('div',{staticClass:\"detail\"},[_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.article.title))]),_c('div',{staticClass:\"author\"},[_c('van-image',{attrs:{\"round\":\"\",\"width\":\"1rem\",\"height\":\"1rem\",\"fit\":\"fill\",\"src\":_vm.article.aut_photo}}),_c('div',{staticClass:\"text\"},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.article.aut_name))]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"relativeTime\")(_vm.article.pubdate)))])]),_c('van-button',{attrs:{\"round\":\"\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.hSwitchFollow}},[_vm._v(_vm._s(_vm.article.is_followed ? '取关' : '+ 关注'))])],1),_c('div',{staticClass:\"content\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.article.content)}})]),_c('van-divider',[_vm._v(\"END\")]),_c('div',{staticClass:\"zan\"},[_c('van-button',{attrs:{\"round\":\"\",\"size\":\"small\",\"hairline\":\"\",\"type\":\"primary\",\"plain\":\"\",\"icon\":_vm.article.attitude === 1 ? 'good-job': 'good-job-o'}},[_vm._v(\"点赞\")]),_vm._v(\" \"),_c('van-button',{attrs:{\"round\":\"\",\"size\":\"small\",\"hairline\":\"\",\"type\":\"danger\",\"plain\":\"\",\"icon\":\"delete\"}},[_vm._v(\"不喜欢\")])],1)],1),_c('article-comment',{ref:\"refArticleComment\",attrs:{\"articleId\":_vm.articleId}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-comments\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('van-cell',{key:item.com_id.toString()},[_c('van-image',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"icon\",\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":item.aut_photo},slot:\"icon\"}),_c('span',{staticStyle:{\"color\":\"#466b9d\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(item.aut_name))]),_c('div',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('p',{staticStyle:{\"color\":\"#363636\"}},[_vm._v(_vm._s(item.content))]),_c('p',[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(_vm._f(\"relativeTime\")(item.pubdate)))]),_c('van-button',{attrs:{\"size\":\"mini\",\"type\":\"default\"},on:{\"click\":function($event){return _vm.hReply(item)}}},[_vm._v(\"回复\"+_vm._s(item.reply_count))])],1)]),_c('van-icon',{attrs:{\"slot\":\"right-icon\",\"name\":\"like-o\"},slot:\"right-icon\"})],1)}),1),_c('van-cell-group',{staticClass:\"publish-wrap\"},[_c('van-field',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入评论内容\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"content\"}},[_c('van-button',{attrs:{\"slot\":\"button\",\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":_vm.hAddComment},slot:\"button\"},[_vm._v(\"发布\")])],1)],1),_c('van-popup',{style:({ height: '80%' }),attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.isReplyShow),callback:function ($$v) {_vm.isReplyShow=$$v},expression:\"isReplyShow\"}},[(_vm.isReplyShow)?_c('comment-reply',{attrs:{\"currentComment\":_vm.currentComment,\"articleId\":_vm.articleId},on:{\"close\":function($event){_vm.isReplyShow=false}}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-comments\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.currentComment.reply_count + '条回复'}},[_c('van-icon',{attrs:{\"slot\":\"left\",\"name\":\"cross\"},on:{\"click\":function($event){return _vm.$emit('close')}},slot:\"left\"})],1),_c('van-cell',{attrs:{\"title\":\"当前评论\"}},[_c('van-image',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"icon\",\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":_vm.currentComment.aut_photo},slot:\"icon\"}),_c('span',{staticStyle:{\"color\":\"#466b9d\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.currentComment.aut_name))]),_c('div',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('p',{staticStyle:{\"color\":\"#363636\"}},[_vm._v(_vm._s(_vm.currentComment.content))]),_c('p',[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(_vm._f(\"relativeTime\")(_vm.currentComment.pubdate)))]),_c('van-button',{attrs:{\"size\":\"mini\",\"type\":\"default\"}},[_vm._v(\"回复\"+_vm._s(_vm.currentComment.reply_count))])],1)]),_c('van-icon',{attrs:{\"slot\":\"right-icon\"},slot:\"right-icon\"})],1),_c('van-divider',[_vm._v(\"全部回复\")]),_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('van-cell',{key:index},[_c('van-image',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"icon\",\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":item.aut_photo},slot:\"icon\"}),_c('span',{staticStyle:{\"color\":\"#466b9d\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(item.aut_name))]),_c('div',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('p',{staticStyle:{\"color\":\"#363636\"}},[_vm._v(_vm._s(item.content))]),_c('p',[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(_vm._f(\"relativeTime\")(item.pubdate)))])])])],1)}),1),_c('van-cell-group',{staticClass:\"publish-wrap\"},[_c('van-field',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入回复内容\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"content\"}},[_c('van-button',{attrs:{\"slot\":\"button\",\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":_vm.hAddReply},slot:\"button\"},[_vm._v(\"发布\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import ajax from '@/utils/request'\r\n/**\r\n * 对文章进行评论\r\n * @param {*} articleId 文章编号\r\n * @param {*} content 评论内容\r\n */\r\nexport const addComment = (articleId, content) => {\r\n  return ajax({\r\n    method: 'POST',\r\n    url: '/app/v1_0/comments',\r\n    data: {\r\n      target: articleId,\r\n      content\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 对文章评论进行回复\r\n * @param {*} commentId  评论id\r\n * @param {*} articleId 文章id\r\n * @param {*} content 回复的内容\r\n */\r\nexport const addCommentReply = (commentId, articleId, content) => {\r\n  return ajax({\r\n    method: 'POST',\r\n    url: '/app/v1_0/comments',\r\n    data: {\r\n      target: commentId,\r\n      content,\r\n      art_id: articleId\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 获取文章的评论\r\n * @param {*} articleId 文章编号\r\n * @param {*} offset （翻页）获取评论数据的偏移量，值为评论id，表示从此id的数据向后取，不传表示从第一页开始读取数据\r\n */\r\nexport const getComments = (articleId, offset) => {\r\n  return ajax({\r\n    method: 'GET',\r\n    url: '/app/v1_0/comments',\r\n    params: {\r\n      type: 'a',\r\n      source: articleId,\r\n      offset\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 获取文章评论的回复\r\n * @param {*} replyId 评论编号\r\n * @param {*} offset （翻页）获取评论数据的偏移量，值为评论id，表示从此id的数据向后取，不传表示从第一页开始读取数据\r\n */\r\nexport const getCommentReplys = (replyId, offset) => {\r\n  return ajax({\r\n    method: 'GET',\r\n    url: '/app/v1_0/comments',\r\n    params: {\r\n      type: 'c',\r\n      source: replyId,\r\n      offset\r\n    }\r\n  })\r\n}\r\n","<template>\r\n<div class=\"article-comments\">\r\n    <!-- 导航栏 -->\r\n    <van-nav-bar :title=\"currentComment.reply_count + '条回复'\">\r\n      <van-icon slot=\"left\" name=\"cross\" @click=\"$emit('close')\" />\r\n    </van-nav-bar>\r\n    <!-- /导航栏 -->\r\n\r\n    <!-- 当前评论 -->\r\n    <van-cell title=\"当前评论\">\r\n      <van-image\r\n        slot=\"icon\"\r\n        round\r\n        width=\"30\"\r\n        height=\"30\"\r\n        style=\"margin-right: 10px;\"\r\n        :src=\"currentComment.aut_photo\"\r\n      />\r\n      <span style=\"color: #466b9d;\" slot=\"title\">{{currentComment.aut_name}}</span>\r\n      <div slot=\"label\">\r\n        <p style=\"color: #363636;\">{{currentComment.content}}</p>\r\n        <p>\r\n          <span style=\"margin-right: 10px;\">{{currentComment.pubdate | relativeTime}}</span>\r\n          <van-button\r\n            size=\"mini\"\r\n            type=\"default\"\r\n          >回复{{currentComment.reply_count}}</van-button>\r\n        </p>\r\n      </div>\r\n      <van-icon slot=\"right-icon\" />\r\n    </van-cell>\r\n    <!-- /当前评论 -->\r\n    <van-divider>全部回复</van-divider>\r\n\r\n    <!-- 对当前评论 回复列表 -->\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n     >\r\n      <van-cell\r\n        v-for=\"(item, index) in list\"\r\n        :key=\"index\"\r\n      >\r\n        <van-image\r\n          slot=\"icon\"\r\n          round\r\n          width=\"30\"\r\n          height=\"30\"\r\n          style=\"margin-right: 10px;\"\r\n          :src=\"item.aut_photo\"\r\n        />\r\n        <span style=\"color: #466b9d;\" slot=\"title\">{{item.aut_name}}</span>\r\n        <div slot=\"label\">\r\n          <p style=\"color: #363636;\">{{item.content}}</p>\r\n          <p>\r\n            <span style=\"margin-right: 10px;\">{{item.pubdate | relativeTime}}</span>\r\n          </p>\r\n        </div>\r\n      </van-cell>\r\n    </van-list>\r\n    <!-- 回复列表 -->\r\n\r\n    <!-- 发布回复 -->\r\n    <van-cell-group class=\"publish-wrap\">\r\n      <van-field\r\n        clearable\r\n        placeholder=\"请输入回复内容\"\r\n        v-model.trim=\"content\"\r\n      >\r\n        <van-button\r\n          slot=\"button\"\r\n          size=\"mini\"\r\n          type=\"info\"\r\n          @click=\"hAddReply\"\r\n        >发布</van-button>\r\n      </van-field>\r\n    </van-cell-group>\r\n    <!-- /发布回复 -->\r\n</div>\r\n\r\n</template>\r\n<script>\r\nimport { getCommentReplys, addCommentReply } from '@/api/comment'\r\nexport default {\r\n  name: 'CommentReply',\r\n  props: {\r\n    currentComment: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    articleId: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      content: '请回复', // 回复内容\r\n      offset: null,\r\n      list: [], // 评论列表\r\n      loading: false, // 上拉加载更多的 loading\r\n      finished: false // 是否加载结束\r\n    }\r\n  },\r\n  methods: {\r\n    async hAddReply () {\r\n      console.log('this.$route.params.id', this.$route.params.id)\r\n      if (this.content === '') {\r\n        return\r\n      }\r\n      try {\r\n        // addCommentReply = (commentId, articleId, content)\r\n        const result = await addCommentReply(this.currentComment.com_id.toString(), this.articleId, this.content)\r\n        console.log(result)\r\n        // 评论成功之后，后端返回的数据中有一个new_obj，它表示本次评论产生完整的数据\r\n        this.list.unshift(result.data.data.new_obj)\r\n\r\n        this.$toast.success('回复成功')\r\n        this.content = ''\r\n\r\n        // 回复数量+1\r\n        this.currentComment.reply_count++\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.$toast('回复失败')\r\n      }\r\n    },\r\n    async onLoad () {\r\n      const comId = this.currentComment.com_id.toString()\r\n      // 1. 请求数据\r\n      const result = await getCommentReplys(comId, this.offset)\r\n      // 2. 将求回的数据添加到list\r\n      const arr = result.data.data.results\r\n      this.list.push(...arr)\r\n      // 3. 更新offset\r\n      this.offset = result.data.data.last_id\r\n      // 4.手动设置loading\r\n      this.loading = false\r\n      // 5.判断是否全部数据加载完成\r\n      if (arr.length === 0) {\r\n        this.finished = true\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n// 发表评论的区域是固定在下端的\r\n.publish-wrap {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n}\r\n// 给发表评论区空出地方\r\n.van-list {\r\n  margin-bottom: 45px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commentReply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commentReply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./commentReply.vue?vue&type=template&id=63c550ce&scoped=true&\"\nimport script from \"./commentReply.vue?vue&type=script&lang=js&\"\nexport * from \"./commentReply.vue?vue&type=script&lang=js&\"\nimport style0 from \"./commentReply.vue?vue&type=style&index=0&id=63c550ce&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63c550ce\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"article-comments\">\r\n    <!-- 评论列表 -->\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n     >\r\n      <van-cell\r\n        v-for=\"item in list\"\r\n        :key=\"item.com_id.toString()\"\r\n      >\r\n        <van-image\r\n          slot=\"icon\"\r\n          round\r\n          width=\"30\"\r\n          height=\"30\"\r\n          style=\"margin-right: 10px;\"\r\n          :src=\"item.aut_photo\"\r\n        />\r\n        <span style=\"color: #466b9d;\" slot=\"title\">{{item.aut_name}}</span>\r\n        <div slot=\"label\">\r\n          <p style=\"color: #363636;\">{{item.content}}</p>\r\n          <p>\r\n            <span style=\"margin-right: 10px;\">{{item.pubdate | relativeTime}}</span>\r\n            <van-button size=\"mini\" type=\"default\" @click=\"hReply(item)\">回复{{item.reply_count}}</van-button>\r\n          </p>\r\n        </div>\r\n        <van-icon slot=\"right-icon\" name=\"like-o\" />\r\n      </van-cell>\r\n    </van-list>\r\n    <!-- 评论列表 -->\r\n\r\n    <!-- 发布评论 -->\r\n    <van-cell-group class=\"publish-wrap\">\r\n      <van-field\r\n        v-model.trim=\"content\"\r\n        clearable\r\n        placeholder=\"请输入评论内容\"\r\n      >\r\n        <van-button slot=\"button\" size=\"mini\" type=\"info\" @click=\"hAddComment\">发布</van-button>\r\n      </van-field>\r\n    </van-cell-group>\r\n    <!-- /发布评论 -->\r\n\r\n    <!-- 评论回复弹层 -->\r\n    <van-popup v-model=\"isReplyShow\" round position=\"bottom\" :style=\"{ height: '80%' }\">\r\n      <comment-reply\r\n      @close=\"isReplyShow=false\"\r\n      v-if=\"isReplyShow\"\r\n      :currentComment=\"currentComment\" :articleId=\"articleId\"/>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CommentReply from './commentReply'\r\nimport { addComment, getComments } from '@/api/comment'\r\nexport default {\r\n  name: 'ArticleComment',\r\n  props: {\r\n    articleId: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  components: {\r\n    CommentReply\r\n  },\r\n  data () {\r\n    return {\r\n      currentComment: {}, // 当前要回复的评论\r\n      isReplyShow: false, // 是否显示评论回复弹层\r\n      offset: null, // 评论的偏移量\r\n      content: '',\r\n      list: [], // 评论列表\r\n      loading: false, // 上拉加载更多的 loading\r\n      finished: false // 是否加载结束\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击了某个评论上的回复按钮\r\n    hReply (item) {\r\n      // 1. 显示弹层\r\n      this.isReplyShow = true\r\n      // 2. 更新当前要回复的评论\r\n      this.currentComment = item\r\n    },\r\n    async hAddComment () {\r\n      if (this.content === '') {\r\n        return\r\n      }\r\n      try {\r\n        // const result = await addComment('文章编号'， 评论内容)\r\n        const result = await addComment(this.articleId, this.content)\r\n        console.log(result)\r\n        // 评论成功之后，后端返回的数据中有一个new_obj，它表示本次评论产生完整的数据\r\n        this.list.unshift(result.data.data.new_obj)\r\n\r\n        this.$toast.success('评论成功')\r\n        this.content = ''\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.$toast('文章没有开放评论权限')\r\n      }\r\n    },\r\n    async onLoad () {\r\n      // 1. 请求数据\r\n      const result = await getComments(this.articleId, this.offset)\r\n      // 2. 将求回的数据添加到list\r\n      const arr = result.data.data.results\r\n      this.list.push(...arr)\r\n      // 3. 更新offset\r\n      this.offset = result.data.data.last_id\r\n      // 4.手动设置loading\r\n      this.loading = false\r\n      // 5.判断是否全部数据加载完成\r\n      if (arr.length === 0) {\r\n        this.finished = true\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n// 发表评论的区域是固定在下端的\r\n.publish-wrap {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n}\r\n// 给发表评论区空出地方\r\n.van-list {\r\n  margin-bottom: 45px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment.vue?vue&type=template&id=4b765953&scoped=true&\"\nimport script from \"./comment.vue?vue&type=script&lang=js&\"\nexport * from \"./comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment.vue?vue&type=style&index=0&id=4b765953&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b765953\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"article-container\">\r\n    <!-- 导航栏 -->\r\n    <van-nav-bar\r\n      fixed\r\n      left-arrow\r\n      @click-left=\"$router.back()\"\r\n      title=\"文章详情\"\r\n    ></van-nav-bar>\r\n    <!-- /导航栏 -->\r\n\r\n    <!-- 加载中 loading -->\r\n    <van-loading class=\"article-loading\"  v-if=\"loading\"/>\r\n    <!-- /加载中 loading -->\r\n\r\n    <div class=\"error\" v-if=\"is404\">\r\n      <p>文章被外星人吃掉了</p>\r\n      <van-button @click=\"$router.back()\">后退</van-button>\r\n      <van-button @click=\"$router.push('/')\">回主页</van-button>\r\n    </div>\r\n\r\n    <!-- 文章详情 -->\r\n    <div class=\"detail\" v-else>\r\n      <h3 class=\"title\">{{article.title}}</h3>\r\n      <div class=\"author\">\r\n        <van-image round width=\"1rem\" height=\"1rem\" fit=\"fill\" :src=\"article.aut_photo\"/>\r\n        <div class=\"text\">\r\n          <p class=\"name\">{{article.aut_name}}</p>\r\n          <p class=\"time\">{{article.pubdate | relativeTime}}</p>\r\n        </div>\r\n        <van-button\r\n          round\r\n          size=\"small\"\r\n          type=\"info\"\r\n          @click=\"hSwitchFollow\"\r\n        >{{ article.is_followed ? '取关' : '+ 关注' }}</van-button>\r\n      </div>\r\n      <div class=\"content\">\r\n        <div v-html=\"article.content\"></div>\r\n      </div>\r\n      <van-divider>END</van-divider>\r\n      <div class=\"zan\">\r\n        <van-button round size=\"small\" hairline type=\"primary\" plain\r\n        :icon=\"article.attitude === 1 ? 'good-job': 'good-job-o'\">点赞</van-button>\r\n        &nbsp;&nbsp;&nbsp;&nbsp;\r\n        <van-button round size=\"small\" hairline type=\"danger\" plain icon=\"delete\">不喜欢</van-button>\r\n      </div>\r\n    </div>\r\n    <!-- /文章详情 -->\r\n\r\n    <!-- 文章评论 -->\r\n    <article-comment :articleId=\"articleId\" ref=\"refArticleComment\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ArticleComment from './comment.vue'\r\nimport { followUser, unFollowUser } from '@/api/user'\r\nimport { getArticle } from '@/api/article'\r\nexport default {\r\n  name: 'ArticleIndex',\r\n  components: {\r\n    ArticleComment\r\n  },\r\n  data () {\r\n    return {\r\n      is404: false, // 文章是否存在\r\n      articleId: null,\r\n      loading: true, // 控制加载中的 loading 状态\r\n      article: { }\r\n    }\r\n  },\r\n  created () {\r\n    this.articleId = this.$route.params.id\r\n    this.loadArticle()\r\n  },\r\n  methods: {\r\n    async hSwitchFollow () {\r\n      const { is_followed: isFollowed, aut_id: autId } = this.article\r\n      if (isFollowed) {\r\n        // 已关注，这里要做取关\r\n        // 1. 发请求\r\n        await unFollowUser(autId.toString())\r\n        // 2. 修改视图\r\n        this.article.is_followed = false\r\n        this.$toast.success('取关成功')\r\n      } else {\r\n        try {\r\n          await followUser(autId.toString())\r\n          this.article.is_followed = true\r\n          this.$toast.success('加关注成功')\r\n        } catch (err) {\r\n          console.log(err)\r\n          this.$toast.fail('加关注失败')\r\n        }\r\n      }\r\n    },\r\n    async loadArticle () {\r\n      // 1. 设置loading\r\n      this.loading = true\r\n      try {\r\n        // 2. 发请求\r\n        const result = await getArticle(this.articleId)\r\n        // console.log(result)\r\n        this.article = result.data.data\r\n        // 3. 设置loading\r\n        this.loading = false\r\n      } catch (err) {\r\n        // if (err.response && err.response.status === 404) {\r\n        //   this.is404 = true\r\n        // } else {\r\n        //   this.$toast.fail('加载失败')\r\n        // }\r\n        this.is404 = (err.response && err.response.status === 404)\r\n        this.$toast.fail('加载失败')\r\n        this.loading = false\r\n      }\r\n    }\r\n  },\r\n  // 组件级别的路由守卫\r\n  beforeRouteLeave (to, from, next) {\r\n    // next(false)\r\n    // next()\r\n    // console.dir(this.$router)\r\n    // console.info('content', this.$refs.refArticleComment.content)\r\n    if (!this.$refs.refArticleComment.content) {\r\n      // 没有评论，没有提示，直接路由跳转\r\n      next()\r\n    } else {\r\n      // 有评论内容，要提示，直接路由跳转\r\n      const ans = window.confirm('页面上有评论，如果离开就会丢失，你确定吗?')\r\n      if (ans) {\r\n        next()\r\n      } else {\r\n        // 页面不跳转\r\n        next(false)\r\n      }\r\n\r\n      // this.$dialog.confirm({\r\n      //   title: '系统提示',\r\n      //   message: '你的数据还没有保存~~'\r\n      // }).then(() => {\r\n      //   next()\r\n      // })\r\n      //   .catch(() => {\r\n      //     next(false)\r\n      //   })\r\n\r\n      // console.log('111111111111111')\r\n    }\r\n    // console.log('beforeRouteLeave (to, from, next)')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.article-container{\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  overflow-y: scroll;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.article-loading {\r\n  padding-top: 100px;\r\n  text-align: center;\r\n}\r\n.error{\r\n  padding-top: 100px;\r\n  text-align: center;\r\n}\r\n.detail {\r\n  padding: 50px 10px;\r\n  .title {\r\n    font-size: 16px;\r\n  }\r\n  .zan{\r\n    text-align: center;\r\n  }\r\n  .author {\r\n    padding: 10px 0;\r\n    display: flex;\r\n    .text {\r\n      flex: 1;\r\n      padding-left: 10px;\r\n      line-height: 1.3;\r\n      .name {\r\n        font-size: 14px;\r\n        margin: 0;\r\n      }\r\n      .time {\r\n        margin: 0;\r\n        font-size: 12px;\r\n        color: #999;\r\n      }\r\n    }\r\n  }\r\n  .content {\r\n    font-size:14px;\r\n    overflow: hidden;\r\n    white-space: pre-wrap;\r\n    word-break: break-all;\r\n    /deep/ img{\r\n      max-width:100%;\r\n      background: #f9f9f9;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1b7da78a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1b7da78a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b7da78a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commentReply.vue?vue&type=style&index=0&id=63c550ce&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./commentReply.vue?vue&type=style&index=0&id=63c550ce&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1b7da78a&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1b7da78a&scoped=true&lang=less&\"","import ajax from '@/utils/request'\r\n// 对所有用户相关的操作进行封装\r\n\r\n/**\r\n * 用户登陆\r\n * @param {string} mobile 手机号\r\n * @param {string} code 密码\r\n */\r\nexport const login = (mobile, code) => {\r\n  // ajax() 这个函数的返回值是一个promise\r\n  return ajax({\r\n    url: '/app/v1_0/authorizations',\r\n    method: 'POST',\r\n    data: {\r\n      mobile,\r\n      code\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 获取用户自已的信息\r\n */\r\nexport const getInfo = () => {\r\n  return ajax({\r\n    method: 'GET',\r\n    url: '/app/v1_0/user'\r\n  })\r\n}\r\n\r\n/**\r\n * 获取用户档案信息\r\n */\r\nexport const getProfile = () => {\r\n  return ajax({\r\n    method: 'GET',\r\n    url: '/app/v1_0/user/profile'\r\n    // headers: {\r\n    //   // Authorization: 'Bearer token值' 之间有空格\r\n    //   Authorization: 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2MDExODQ0MDIsInVzZXJfaWQiOjExMDI0OTA1MjI4Mjk3MTc1MDQsInJlZnJlc2giOmZhbHNlfQ.8A8wyLwEvRrz3cdkPe3x7juskspAF1OnDsGMWYf0oIw'\r\n    // }\r\n  })\r\n}\r\n\r\nexport const logout = (mobile, code) => {\r\n  return ajax({\r\n    url: '/app/v1_0/authorizations/xxxxx',\r\n    method: 'POST',\r\n    data: {\r\n      mobile,\r\n      code\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 关注用户\r\n * @param {*} userId 用户的id\r\n */\r\nexport const followUser = userId => {\r\n  return ajax({\r\n    method: 'POST',\r\n    url: '/app/v1_0/user/followings',\r\n    data: {\r\n      target: userId\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消关注用户\r\n * @param {*} userId 用户的id\r\n */\r\nexport const unFollowUser = userId => {\r\n  return ajax({\r\n    method: 'DELETE',\r\n    url: '/app/v1_0/user/followings/' + userId\r\n  })\r\n}\r\n\r\n/**\r\n * 修改个人的三项基本信息\r\n * @param {*} obj 要修改的内容\r\n * obj {\r\n *  name: 姓名,\r\n *  gender: 性别：男(0) ,女(1)\r\n *  birthday: 2010-12-20\r\n * }\r\n */\r\nexport const updateUserInfo = obj => {\r\n  return ajax({\r\n    method: 'PATCH',\r\n    url: '/app/v1_0/user/profile',\r\n    data: obj\r\n  })\r\n}\r\n\r\n/**\r\n * 修改用户头像\r\n *\r\n * obj： 以formData格式保存参数\r\n */\r\nexport const updatePhoto = obj => {\r\n  return ajax({\r\n    method: 'PATCH',\r\n    url: '/app/v1_0/user/photo',\r\n    data: obj\r\n    // data: {\r\n    //   photo: xxxx\r\n    // }\r\n  })\r\n}\r\n// const result = await ajax({\r\n//   url: '/app/v1_0/authorizations',\r\n//   method: 'POST',\r\n//   data: {\r\n//     mobile,\r\n//     code\r\n//   }\r\n// })\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=style&index=0&id=4b765953&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=style&index=0&id=4b765953&scoped=true&lang=less&\""],"sourceRoot":""}