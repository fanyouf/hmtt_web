(function(e){function t(t){for(var r,a,i=t[0],s=t[1],u=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},c={app:0},o=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-0da10364":"d3bb5e04","chunk-25288e1a":"b4e0b504","chunk-2d0a2e01":"4e47a63d","chunk-2d0a4772":"305433c0","chunk-2d0cff01":"04d98a42","chunk-3bcdca9c":"a5f3cb77","chunk-a3202f98":"76a7c01e","chunk-b5bc11ea":"8a671367"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0da10364":1,"chunk-25288e1a":1,"chunk-3bcdca9c":1,"chunk-a3202f98":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0da10364":"54b3e07d","chunk-25288e1a":"f78f9bb2","chunk-2d0a2e01":"31d6cfe0","chunk-2d0a4772":"31d6cfe0","chunk-2d0cff01":"31d6cfe0","chunk-3bcdca9c":"57ee3c33","chunk-a3202f98":"1346713a","chunk-b5bc11ea":"31d6cfe0"}[e]+".css",c=s.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var u=o[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===c))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===c)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],f.parentNode.removeChild(f),n(o)},f.href=c;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){a[e]=0})));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=c[e]=[t,n]}));t.push(r[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}c[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"15cd":function(e,t,n){},"18dd":function(e,t,n){"use strict";var r=n("6a17"),a=n.n(r);a.a},"199c":function(e,t){},"23be":function(e,t,n){"use strict";var r=n("199c"),a=n.n(r);t["default"]=a.a},2423:function(e,t,n){"use strict";n.r(t),n.d(t,"getArticles",(function(){return a})),n.d(t,"dislikeArticle",(function(){return c})),n.d(t,"reportArticle",(function(){return o})),n.d(t,"getArticle",(function(){return i}));var r=n("b775"),a=function(e,t){return Object(r["a"])({method:"GET",url:"/app/v1_1/articles",params:{channel_id:e,timestamp:t,with_top:1}})},c=function(e){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/dislikes",data:{target:e}})},o=function(e,t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/reports",data:{target:e,type:t}})},i=function(e){return Object(r["a"])({method:"GET",url:"/app/v1_0/articles/"+e})}},2533:function(e,t,n){"use strict";var r=n("6d9c"),a=n.n(r);a.a},2758:function(e,t,n){"use strict";var r=n("dbfe"),a=n.n(r);a.a},"2e6b":function(e,t,n){},"3dfd":function(e,t,n){"use strict";var r=n("ae07"),a=n("23be"),c=n("2877"),o=Object(c["a"])(a["default"],r["a"],r["b"],!1,null,null,null);t["default"]=o.exports},4360:function(e,t,n){"use strict";var r=n("2b0e"),a=n("2f62"),c=n("5d2d");r["a"].use(a["a"]),t["a"]=new a["a"].Store({state:{tokenInfo:Object(c["a"])("tokenInfo")||{},userInfo:Object(c["a"])("userInfo")||{}},mutations:{mSetUserInfo:function(e,t){e.userInfo=t,Object(c["c"])("userInfo",t)},mSetUserPhoto:function(e,t){e.userInfo.photo=t,Object(c["c"])("userInfo",e.userInfo)},mSetTokenInfo:function(e,t){e.tokenInfo=t,Object(c["c"])("tokenInfo",t)},mClearTokenInfo:function(e){e.tokenInfo={},Object(c["b"])("tokenInfo")}},getters:{isLogin:function(e){return!!e.tokenInfo.token}},actions:{},modules:{}})},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("3dfd"),c=n("a18c"),o=n("4360");c["a"].beforeEach((function(e,t,n){"/user"===e.path||"/user/profile"===e.path?o["a"].state.tokenInfo.token?n():n("/login?backto="+e.fullPath):n()}));var i=c["a"],s=(n("5cfb"),n("157a"),n("a4b1"),n("5a0c")),u=n.n(s),l=n("4208");u.a.extend(l),n("a471"),u.a.locale("zh-cn");var d=function(e){return u()(e).format("YYYY年MM月DD日")},f=function(e){return u()().to(u()(e))},h=new r["a"],p=(n("e17f"),n("2241")),m=(n("5852"),n("d961")),v=(n("ac1e"),n("543e")),b=(n("2b28"),n("9ed2")),g=(n("2cbd"),n("ab2c")),k=(n("ab71"),n("58e6")),w=(n("4056"),n("44bf")),_=(n("5f1a"),n("a3e2")),x=(n("81e6"),n("9ffb")),O=(n("4d48"),n("d1e1")),y=(n("8a58"),n("e41f")),j=(n("0ec5"),n("21ab")),C=(n("3df5"),n("2830")),I=(n("c3a6"),n("ad06")),A=(n("c194"),n("7744")),$=(n("0653"),n("34e9")),T=(n("66cf"),n("343b")),E=(n("2994"),n("2bdd")),R=(n("da3c"),n("0b33")),S=(n("bda7"),n("5e46")),L=(n("e7e5"),n("d399")),P=(n("5246"),n("6b41")),M=(n("be7f"),n("565f")),N=(n("38d5"),n("772a")),q=(n("a52c"),n("2ed4")),D=(n("537a"),n("ac28")),U=(n("66b9"),n("b650"));r["a"].use(U["a"]),r["a"].use(D["a"]),r["a"].use(q["a"]),r["a"].use(N["a"]),r["a"].use(M["a"]),r["a"].use(P["a"]),r["a"].use(L["a"]),r["a"].use(S["a"]),r["a"].use(R["a"]),r["a"].use(E["a"]),r["a"].use(T["a"]),r["a"].use($["a"]),r["a"].use(A["a"]),r["a"].use(I["a"]),r["a"].use(C["a"]),r["a"].use(j["a"]),r["a"].use(y["a"]),r["a"].use(O["a"]),r["a"].use(x["a"]),r["a"].use(_["a"]),r["a"].use(w["a"]),r["a"].use(k["a"]),r["a"].use(g["a"]),r["a"].use(b["a"]),r["a"].use(v["a"]),r["a"].use(m["a"]),r["a"].use(p["a"]),r["a"].filter("formatTime",(function(e){return d(e)})),r["a"].filter("relativeTime",(function(e){return f(e)})),r["a"].prototype.$eventBus=h,r["a"].config.productionTip=!1,new r["a"]({router:i,store:o["a"],render:function(e){return e(a["default"])}}).$mount("#app")},"5d2d":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=function(e,t){localStorage.setItem(e,JSON.stringify(t))},a=function(e){return JSON.parse(localStorage.getItem(e))},c=function(e){localStorage.removeItem(e)}},"6a17":function(e,t,n){},"6d9c":function(e,t,n){},a18c:function(e,t,n){"use strict";n("d3b7");var r=n("2b0e"),a=n("8c4f"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("van-nav-bar",{attrs:{title:"登陆"}}),n("van-cell-group",[n("van-field",{attrs:{type:"tel",label:"手机号",required:"","error-message":e.mobile_errmsg,placeholder:"请输入手机号"},model:{value:e.mobile,callback:function(t){e.mobile="string"===typeof t?t.trim():t},expression:"mobile"}}),n("van-field",{attrs:{type:"password",label:"密码",required:"","error-message":e.code_errmsg,placeholder:"请输入密码"},model:{value:e.code,callback:function(t){e.code="string"===typeof t?t.trim():t},expression:"code"}})],1),n("div",{staticClass:"btn-wrap"},[n("van-button",{staticClass:"btn",attrs:{type:"info"},on:{click:e.hLogin}},[e._v("登陆")])],1),n("p",[e._v("当前是否有登陆："+e._s(e.$store.state.tokenInfo.token?"登陆了":"没有登陆"))]),n("van-button",{staticClass:"btn",attrs:{type:"info"},on:{click:e.hGetProfile}},[e._v("测试去获取用户个人信息"+e._s(e.$store.state.tokenInfo.token?"登陆了":"没有登陆"))])],1)},o=[],i=(n("b0c0"),n("96cf"),n("1da1")),s=n("c24f"),u={name:"Login",data:function(){return{mobile:"13912345678",code:"246810",mobile_errmsg:"",code_errmsg:""}},methods:{hGetProfile:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["c"])();case 2:case"end":return e.stop()}}),e)})))()},check:function(){return this.mobile_errmsg=""===this.mobile?"大姐，手机号要写对":"",this.code_errmsg=""===this.code?"大姐，您没有收到密码吗？":"",""!==this.mobile&&""!==this.code},hLogin:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.check()){t.next=4;break}return t.abrupt("return");case 4:return e.$toast.loading({duration:0,mask:!0,message:"登陆中...."}),t.prev=5,t.next=8,Object(s["d"])(e.mobile,e.code);case 8:return n=t.sent,e.$store.commit("mSetTokenInfo",n.data.data),t.next=12,Object(s["b"])();case 12:r=t.sent,a=r.data.data,e.$store.commit("mSetUserInfo",{id:a.id,name:a.name,photo:a.photo}),e.$toast.success("登陆成功"),c=e.$route.query.backto||"/",e.$router.push(c),t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](5),e.$toast.fail("登陆失败");case 25:case"end":return t.stop()}}),t,null,[[5,21]])})))()}}},l=u,d=(n("feef"),n("2877")),f=Object(d["a"])(l,c,o,!1,null,"32a04074",null),h=f.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("van-nav-bar",{directives:[{name:"show",rawName:"v-show",value:"/user"!==e.$route.path,expression:"$route.path!=='/user'"}],attrs:{fixed:""}},[n("div",{staticClass:"logo",attrs:{slot:"left"},slot:"left"}),n("van-button",{attrs:{slot:"right",round:"",type:"info",size:"small",icon:"search"},on:{click:function(t){return e.$router.push("/search")}},slot:"right"},[e._v("搜索")])],1),n("router-view"),n("van-tabbar",{attrs:{route:""}},[n("van-tabbar-item",{attrs:{to:"/",icon:"home-o"}},[e._v(" 首页 ")]),n("van-tabbar-item",{attrs:{to:"/question",icon:"chat-o"}},[e._v(" 问答 ")]),n("van-tabbar-item",{attrs:{to:"/video",icon:"video-o"}},[e._v(" 视频 ")]),n("van-tabbar-item",{attrs:{to:"/user",icon:"search"}},[e._v(" "+e._s(e.$store.getters.isLogin?"我的":"未登陆")+" ")])],1)],1)},m=[],v={name:"Layout",created:function(){},destroyed:function(){}},b=v,g=(n("aadc"),Object(d["a"])(b,p,m,!1,null,"2800cfae",null)),k=g.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index"},[n("van-tabs",{model:{value:e.curIndex,callback:function(t){e.curIndex=t},expression:"curIndex"}},e._l(e.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t},on:{showMoreAction:e.hShowMoreAction}})],1)})),1),e.$store.getters.isLogin?n("div",{staticClass:"bar-btn",on:{click:function(t){e.showChannelEdit=!0}}},[n("van-icon",{attrs:{name:"wap-nav"}})],1):e._e(),n("van-popup",{style:{width:"80%"},model:{value:e.showMoreAction,callback:function(t){e.showMoreAction=t},expression:"showMoreAction"}},[n("more-action",{ref:"refMoreAction",on:{report:e.hReport,dislike:e.hDislike}})],1),n("van-action-sheet",{attrs:{title:"频道管理"},model:{value:e.showChannelEdit,callback:function(t){e.showChannelEdit=t},expression:"showChannelEdit"}},[n("channel-edit",{attrs:{channels:e.channels,curIndex:e.curIndex},on:{fixedIndex:e.hFixedIndex,updateCurChannel:e.hUpdateCurChannel}})],1)],1)},_=[],x=n("b775"),O=function(){return Object(x["a"])({method:"GET",url:"/app/v1_0/user/channels"})},y=function(){return Object(x["a"])({method:"GET",url:"/app/v1_0/channels"})},j=function(e){return Object(x["a"])({method:"PUT",url:"/app/v1_0/user/channels",data:{channels:e}})},C=function(e){return Object(x["a"])({method:"DELETE",url:"/app/v1_0/user/channels",data:{channels:[e]}})},I=n("2423"),A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"refScroll",staticClass:"scroll-wrapper",on:{scroll:e.hScroll}},[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoadingNew,callback:function(t){e.isLoadingNew=t},expression:"isLoadingNew"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t,r){return n("van-cell",{key:r,attrs:{title:t.title},on:{click:function(n){e.$router.push("/article/"+t.art_id.toString())}}},[n("div",{attrs:{slot:"label"},slot:"label"},[n("van-grid",{attrs:{"column-num":t.cover.images.length,border:!1}},e._l(t.cover.images,(function(e,t){return n("van-grid-item",{key:t},[n("van-image",{attrs:{src:e,"lazy-load":""}})],1)})),1),n("div",{staticClass:"meta"},[n("span",[e._v(e._s(t.aut_name))]),n("span",[e._v(e._s(t.comm_count)+"评论")]),n("span",[e._v(e._s(e._f("relativeTime")(t.pubdate)))]),e.isLogin?n("span",{staticClass:"close",on:{click:function(n){return n.stopPropagation(),e.hClose(t)}}},[n("van-icon",{attrs:{name:"cross"}})],1):e._e()])],1)])})),1)],1)],1)},$=[],T=(n("99af"),n("c740"),n("a434"),n("25f0"),n("2909")),E=n("5530"),R=n("2f62"),S={name:"ArticleList",props:["channel"],data:function(){return{list:[],timestamp:null,isLoadingNew:!1,loading:!1,finished:!1}},computed:Object(E["a"])({},Object(R["b"])(["isLogin"])),created:function(){var e=this;this.$eventBus.$on("delArticle",(function(t){var n=t.articleId,r=t.channelId;if(r===e.channel.id){var a=e.list.findIndex((function(e){return e.art_id.toString()===n}));-1!==a&&e.list.splice(a,1)}}))},methods:{hScroll:function(){this.scrollTop=this.$refs.refScroll.scrollTop},hClose:function(e){var t=e.art_id.toString();this.$emit("showMoreAction",t)},onRefresh:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(I["getArticles"])(e.channel.id,Date.now());case 2:r=t.sent,a=r.data.data.results,(n=e.list).unshift.apply(n,Object(T["a"])(a)),e.$toast.success("刷新成功"+a.length+"条"),e.isLoadingNew=!1;case 7:case"end":return t.stop()}}),t)})))()},onLoad:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.timestamp||(e.timestamp=Date.now()),t.next=3,Object(I["getArticles"])(e.channel.id,e.timestamp);case 3:n=t.sent,e.timestamp=n.data.data.pre_timestamp,r=n.data.data.results,e.list=e.list.concat(r),e.loading=!1,0===r.length&&(e.finished=!0);case 10:case"end":return t.stop()}}),t)})))()}},activated:function(){this.scrollTop&&(this.$refs.refScroll.scrollTop=this.scrollTop)},deactivated:function(){}},L=S,P=(n("2758"),Object(d["a"])(L,A,$,!1,null,"57bec0a7",null)),M=P.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"more-action"},[e.isReport?n("van-cell-group",[n("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(t){e.isReport=!1}}},[e._v("返回")]),e._l(e.reportTypeList,(function(t){return n("van-cell",{key:t.value,on:{click:function(n){return e.$emit("report",t.value)}}},[e._v(" "+e._s(t.label)+" ")])}))],2):n("van-cell-group",[n("van-cell",{on:{click:function(t){return e.$emit("dislike")}}},[e._v("不感兴趣")]),n("van-cell",{attrs:{"is-link":""},on:{click:function(t){e.isReport=!0}}},[e._v("反馈垃圾内容")]),n("van-cell",[e._v("拉黑作者")])],1)],1)},q=[],D=[{value:0,label:"其它问题"},{value:1,label:"标题夸张"},{value:2,label:"低俗色情"},{value:3,label:"错别字多"},{value:4,label:"旧闻重复"},{value:6,label:"内容不实"},{value:8,label:"侵权"},{value:5,label:"广告软文"},{value:7,label:"涉嫌违法犯罪"}],U=D,B={name:"MoreAction",data:function(){return{reportTypeList:U,isReport:!1}},methods:{abc:function(){alert("abc")}}},z=B,G=(n("2533"),Object(d["a"])(z,N,q,!1,null,"2aac19f3",null)),H=G.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-edit"},[n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"我的频道",border:!1}},[n("van-button",{staticClass:"editBtn",attrs:{size:"mini",plain:"",hairline:"",type:"info"},on:{click:function(t){e.editing=!e.editing}}},[e._v(" "+e._s(e.editing?"取消":"编辑")+" ")])],1),n("van-grid",e._l(e.channels,(function(t,r){return n("van-grid-item",{key:t.id,class:{cur:e.curIndex===r},on:{click:function(t){return e.hClickMyChannel(r)}}},[n("span",[e._v(e._s(t.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.editing&&0!==t.id,expression:"editing && item.id!== 0"}],staticClass:"btn",attrs:{name:"cross"}})],1)})),1)],1),n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"可选频道",border:!1}}),n("van-grid",e._l(e.recommendChannels,(function(t){return n("van-grid-item",{key:t.id,on:{click:function(n){return e.hAddChannel(t)}}},[n("span",[e._v(e._s(t.name))])])})),1)],1)])},K=[],Y=(n("4de4"),n("d81d"),n("a9e3"),{name:"ChannelEdit",props:{channels:{type:Array,required:!0},curIndex:{type:Number,required:!0}},data:function(){return{editing:!1,allChannels:[]}},created:function(){this.loadAllChannels()},computed:{recommendChannels:function(){var e=this,t=this.allChannels.filter((function(t){var n=e.channels.findIndex((function(e){return e.id===t.id}));return-1===n}));return t}},methods:{hAddChannel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[].concat(Object(T["a"])(t.channels),[e]),r=r.map((function(e,t){return{id:e.id,seq:t}})),r.splice(0,1),n.next=5,j(r);case 5:n.sent,t.channels.push(e);case 8:case"end":return n.stop()}}),n)})))()},hClickMyChannel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.editing){n.next=12;break}if(0!==e){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,C(t.channels[e].id);case 6:n.sent,t.channels.splice(e,1),e<t.curIndex&&t.$emit("fixedIndex",t.curIndex-1),n.next=13;break;case 12:t.$emit("updateCurChannel",e);case 13:case"end":return n.stop()}}),n)})))()},loadAllChannels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:n=t.sent,e.allChannels=n.data.data.channels;case 5:case"end":return t.stop()}}),t)})))()}}}),F=Y,Q=(n("a214"),Object(d["a"])(F,J,K,!1,null,"26741678",null)),V=Q.exports,W=I["dislikeArticle"],X=I["reportArticle"],Z={name:"Home",data:function(){return{channels:[],curIndex:0,articleId:null,showChannelEdit:!1,showMoreAction:!1}},components:{ArticleList:M,MoreAction:H,ChannelEdit:V},created:function(){this.loadChannels()},methods:{hFixedIndex:function(e){this.curIndex=e},hUpdateCurChannel:function(e){this.showChannelEdit=!1,this.curIndex=e},delArticle:function(){var e={articleId:this.articleId,channelId:this.channels[this.curIndex].id};this.$eventBus.$emit("delArticle",e)},hReport:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=3,X(t.articleId,e);case 3:n.sent,t.showMoreAction=!1,t.delArticle();case 7:case"end":return n.stop()}}),n)})))()},hDislike:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,W(e.articleId);case 4:t.sent,e.showMoreAction=!1,e.delArticle(),e.$toast.success("操作成功"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.$toast.fail("操作失败");case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()},loadChannels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:n=t.sent,e.channels=n.data.data.channels;case 5:case"end":return t.stop()}}),t)})))()},hShowMoreAction:function(e){this.articleId=e,this.showMoreAction=!0,this.$refs.refMoreAction&&(this.$refs.refMoreAction.isReport=!1)}}},ee=Z,te=(n("18dd"),Object(d["a"])(ee,w,_,!1,null,"203c2bc9",null)),ne=te.exports,re=a["a"].prototype.push;a["a"].prototype.push=function(e,t,n){return t||n?re.call(this,e,t,n):re.call(this,e).catch((function(e){return e}))},r["a"].use(a["a"]);var ae=[{path:"/login",name:"login",component:h},{path:"/",name:"layout",component:k,children:[{path:"",component:ne,meta:{isKeepAlive:!0}},{path:"/video",component:function(){return n.e("chunk-2d0a2e01").then(n.bind(null,"007b"))}},{path:"/question",component:function(){return n.e("chunk-2d0a4772").then(n.bind(null,"070e"))}},{path:"/user",component:function(){return n.e("chunk-0da10364").then(n.bind(null,"e382"))}}]},{path:"/search",name:"search",component:function(){return n.e("chunk-b5bc11ea").then(n.bind(null,"efe3"))}},{path:"/search/result",name:"searchResult",component:function(){return n.e("chunk-3bcdca9c").then(n.bind(null,"f799"))}},{path:"/article/:id",name:"article",component:function(){return n.e("chunk-a3202f98").then(n.bind(null,"230c"))}},{path:"/user/profile",name:"profile",component:function(){return n.e("chunk-2d0cff01").then(n.bind(null,"669d"))}},{path:"/user/chat",name:"chat",component:function(){return n.e("chunk-25288e1a").then(n.bind(null,"5b57"))}}],ce=new a["a"]({routes:ae});t["a"]=ce},a214:function(e,t,n){"use strict";var r=n("15cd"),a=n.n(r);a.a},a4b1:function(e,t,n){},aadc:function(e,t,n){"use strict";var r=n("2e6b"),a=n.n(r);a.a},ae07:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("keep-alive",[e.$route.meta.isKeepAlive?n("router-view"):e._e()],1),e.$route.meta.isKeepAlive?e._e():n("router-view")],1)},a=[]},b3f5:function(e,t,n){},b775:function(e,t,n){"use strict";n("d3b7"),n("96cf");var r=n("1da1"),a=n("bc3a"),c=n.n(a),o=n("4360"),i=n("d604"),s=n.n(i),u=n("a18c"),l=c.a.create({baseURL:"http://ttapi.research.itcast.cn",transformResponse:[function(e){try{return s.a.parse(e)}catch(t){return e}}]});l.interceptors.request.use((function(e){var t=o["a"].state.tokenInfo.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.response||401!==t.response.status){e.next=22;break}if(n=o["a"].state.tokenInfo.refresh_token,!n){e.next=20;break}return e.prev=4,e.next=7,c()({method:"PUT",url:"http://ttapi.research.itcast.cn/app/v1_0/authorizations",headers:{Authorization:"Bearer ".concat(n)}});case 7:return r=e.sent,a=r.data.data.token,o["a"].commit("mSetTokenInfo",{token:a,refresh_token:n}),e.abrupt("return",l(t.config));case 14:e.prev=14,e.t0=e["catch"](4),u["a"].push("/login?backto="+u["a"].currentRoute.fullPath);case 18:e.next=22;break;case 20:u["a"].push("/login?backto="+u["a"].currentRoute.fullPath);case 22:return e.abrupt("return",Promise.reject(t));case 23:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}());c.a.create({baseURL:"http://api-toutiao-web.itheima.net"});t["a"]=l},c24f:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return l}));var r=n("b775"),a=function(e,t){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:{mobile:e,code:t}})},c=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})},o=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},i=function(e){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:e}})},s=function(e){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/"+e})},u=function(e){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:e})},l=function(e){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:e})}},dbfe:function(e,t,n){},feef:function(e,t,n){"use strict";var r=n("b3f5"),a=n.n(r);a.a}});
//# sourceMappingURL=app.cf7e11fe.js.map